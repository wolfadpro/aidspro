<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biddily.com - AI-Powered Retail Media Optimization</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    
    <!-- Google Analytics Tracking Code -->
    <!-- Replace G-XXXXXXXXXX with your actual Measurement ID -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-XXXXXXXXXX');
    </script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            scroll-behavior: smooth;
        }
        .gradient-text {
            background: linear-gradient(to right, #059669, #34D399);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .gradient-text-alt {
            background: linear-gradient(to right, #10B981, #2DD4BF, #06B6D4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .gradient-bg {
            background: linear-gradient(to right, #10B981, #2DD4BF);
        }
        .gradient-border {
            border: 2px solid transparent;
            background-clip: padding-box;
            border-image: linear-gradient(to right, #10B981, #2DD4BF, #06B6D4) 1;
        }
        /* Custom slider styles */
        input[type=range] {
            -webkit-appearance: none;
            appearance: none;
            width: 100%;
            height: 8px;
            background: #d1fae5; /* emerald-100 */
            border-radius: 5px;
            outline: none;
            opacity: 0.7;
            transition: opacity .2s;
        }
        input[type=range]:hover {
            opacity: 1;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: #059669; /* emerald-600 */
            cursor: pointer;
            border-radius: 50%;
            border: 4px solid white;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        }
        input[type=range]::-moz-range-thumb {
            width: 24px;
            height: 24px;
            background: #059669;
            cursor: pointer;
            border-radius: 50%;
            border: 4px solid white;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        }
        /* Loading Spinner */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #059669;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .message-box {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            padding: 1rem 2rem;
            border-radius: 0.5rem;
            color: #fff;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease-in-out;
            opacity: 0;
            visibility: hidden;
        }
        .message-box.show {
            opacity: 1;
            visibility: visible;
        }
        .message-box.error {
            background-color: #ef4444; /* red-500 */
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header -->
    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-emerald-600">Biddily.com</h1>
            <nav class="hidden md:flex items-center space-x-6">
                <a href="#features" class="text-gray-600 hover:text-emerald-600">Features</a>
                <a href="#ai-features" class="text-gray-600 hover:text-emerald-600">AI Tools</a>
                <a href="#pricing" class="text-gray-600 hover:text-emerald-600">Pricing</a>
                <a href="#contact" class="text-gray-600 hover:text-emerald-600">Contact</a>
            </nav>
            <div>
                <a href="#signup" class="text-gray-600 hover:text-emerald-600 mr-4">Log In</a>
                <a href="#signup" class="bg-emerald-600 text-white font-semibold px-5 py-2 rounded-lg hover:bg-emerald-700 transition duration-300">Get Started Free</a>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <main id="home" class="container mx-auto px-6 py-24 text-center">
        <div class="max-w-4xl mx-auto">
            <h2 class="text-5xl md:text-7xl font-extrabold leading-tight mb-4">
                Stop Guessing.
                <span class="gradient-text">Start Growing Your ROAS.</span>
            </h2>
            <p class="text-lg md:text-xl text-gray-600 mb-8 max-w-2xl mx-auto">
                Biddily is the AI co-pilot for retail media. We unify your campaigns, automate your bid strategies, and provide the insights you need to dominate the digital shelf.
            </p>
            <div class="flex justify-center space-x-4">
                <a href="#signup" class="bg-emerald-600 text-white font-bold px-8 py-4 rounded-lg text-lg hover:bg-emerald-700 transition duration-300 shadow-lg">Start Your 14-Day Free Trial</a>
                <a href="#ai-features" class="bg-white text-emerald-600 font-bold px-8 py-4 rounded-lg text-lg hover:bg-gray-100 transition duration-300 border border-gray-200 shadow-lg">See AI in Action</a>
            </div>
        </div>
    </main>

    <!-- Features Section -->
    <section id="features" class="bg-white py-20">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h3 class="text-4xl font-bold mb-2">The Operating System for Retail Media</h3>
                <p class="text-gray-600 text-lg">Everything you need to scale your brand profitably.</p>
            </div>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="bg-gray-50 p-8 rounded-xl shadow-md hover:shadow-xl transition-shadow duration-300">
                    <div class="bg-emerald-100 text-emerald-600 rounded-full w-16 h-16 flex items-center justify-center mb-6">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" /></svg>
                    </div>
                    <h4 class="text-2xl font-bold mb-3">Unified Campaign Management</h4>
                    <p class="text-gray-600">Connect all your retail media accounts. Manage campaigns, budgets, and reporting from a single, intuitive dashboard.</p>
                </div>
                <div class="bg-gray-50 p-8 rounded-xl shadow-md hover:shadow-xl transition-shadow duration-300">
                    <div class="bg-emerald-100 text-emerald-600 rounded-full w-16 h-16 flex items-center justify-center mb-6">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" /></svg>
                    </div>
                    <h4 class="text-2xl font-bold mb-3">AI-Powered Bid Optimization</h4>
                    <p class="text-gray-600">Our AI engine works 24/7 to optimize your bids based on your ROAS targets, allocating your budget for maximum impact.</p>
                </div>
                <div class="bg-gray-50 p-8 rounded-xl shadow-md hover:shadow-xl transition-shadow duration-300">
                     <div class="bg-emerald-100 text-emerald-600 rounded-full w-16 h-16 flex items-center justify-center mb-6">
                         <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" /></svg>
                     </div>
                    <h4 class="text-2xl font-bold mb-3">âœ¨ AI Creative & Data Studio</h4>
                    <p class="text-gray-600">Instantly generate ad copy, brainstorm keywords with real-time search volume, and get performance summaries in plain English.</p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Gemini AI Features Section -->
    <section id="ai-features" class="py-20 bg-gray-50">
        <div class="container mx-auto px-6">
            <div class="text-center mb-12">
                <h3 class="text-4xl font-bold mb-2 gradient-text-alt">AI Co-pilot in Action</h3>
                <p class="text-gray-600 text-lg">Try our Gemini-powered tools right now. No sign-up required.</p>
            </div>
            <div class="grid lg:grid-cols-2 gap-8 max-w-6xl mx-auto">
                <!-- AI Ad Copy Generator -->
                <div class="bg-white p-8 rounded-xl shadow-lg border">
                    <h4 class="text-2xl font-bold mb-1">âœ¨ AI Ad Copy Generator</h4>
                    <p class="text-gray-500 mb-4">Never write ad copy from scratch again.</p>
                    <div class="space-y-4">
                        <input id="productName" type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500" placeholder="Enter a product name (e.g., 'Organic Matcha Green Tea')">
                        <button id="generateCopyBtn" class="w-full bg-emerald-600 text-white font-bold py-3 rounded-lg hover:bg-emerald-700 transition-all flex items-center justify-center space-x-2">
                            <span>Generate Ad Headlines</span>
                        </button>
                        <div id="copyResult" class="mt-4 p-4 bg-gray-50 rounded-lg min-h-[150px] whitespace-pre-wrap text-gray-700"></div>
                    </div>
                </div>
                <!-- AI Keyword Brainstormer with Data -->
                <div class="bg-white p-8 rounded-xl shadow-lg border">
                    <h4 class="text-2xl font-bold mb-1">âœ¨ AI Keyword Brainstormer</h4>
                    <p class="text-gray-500 mb-4">Discover keywords with real-time search volume.</p>
                    <div class="space-y-4">
                        <input id="keywordTopic" type="text" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-emerald-500 focus:border-emerald-500" placeholder="Enter a product or topic (e.g., 'sustainable yoga mat')">
                        <button id="generateKeywordsBtn" class="w-full bg-emerald-600 text-white font-bold py-3 rounded-lg hover:bg-emerald-700 transition-all flex items-center justify-center space-x-2">
                            <span>Generate Keywords & Data</span>
                        </button>
                        <div class="mt-4 p-4 bg-gray-50 rounded-lg min-h-[250px]">
                            <div id="keywordsResultTableContainer" class="overflow-x-auto">
                                <!-- Table will be generated here -->
                            </div>
                        </div>
                        <p class="text-xs text-gray-400 text-center">Keyword data requires a third-party API key (e.g., from SerpApi). See code for details.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
    <section id="pricing" class="py-20 bg-white">
        <div class="container mx-auto px-6">
            <div class="text-center mb-16">
                <h3 class="text-4xl font-bold mb-2">Simple, Transparent Pricing That Scales</h3>
                <p class="text-gray-600 text-lg">Choose a predictable plan or pay as you grow. No surprises.</p>
            </div>
            <div class="grid lg:grid-cols-2 gap-8 max-w-4xl mx-auto mb-16">
                <div class="border rounded-xl p-8 flex flex-col h-full">
                    <h4 class="text-2xl font-bold">Starter</h4>
                    <p class="text-gray-500 mt-2">For high-growth brands.</p>
                    <div class="mt-6"><span class="text-5xl font-extrabold">$2,500</span><span class="text-gray-500">/ month</span></div>
                    <p class="mt-2 text-gray-500 font-semibold">Includes up to $100,000 in monthly ad spend.</p>
                    <ul class="mt-8 space-y-4 text-gray-600 flex-grow">
                        <li class="flex items-center"><svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> 5 Connected Retailers</li>
                        <li class="flex items-center"><svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> AI Bid Optimization</li>
                        <li class="flex items-center"><svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> AI Creative Studio Access</li>
                    </ul>
                    <a href="#signup" class="mt-8 w-full text-center bg-emerald-600 text-white font-bold py-3 rounded-lg hover:bg-emerald-700">Choose Starter</a>
                </div>
                <div class="border rounded-xl p-8 flex flex-col h-full">
                    <h4 class="text-2xl font-bold">Pro</h4>
                    <p class="text-gray-500 mt-2">For established brands and agencies.</p>
                    <div class="mt-6"><span class="text-5xl font-extrabold">$5,000</span><span class="text-gray-500">/ month</span></div>
                    <p class="mt-2 text-gray-500 font-semibold">Includes up to $200,000 in monthly ad spend.</p>
                    <ul class="mt-8 space-y-4 text-gray-600 flex-grow">
                        <li class="flex items-center"><svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Unlimited Retailers</li>
                        <li class="flex items-center"><svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Advanced Analytics & Insights</li>
                        <li class="flex items-center"><svg class="w-5 h-5 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> Priority Support</li>
                    </ul>
                    <a href="#signup" class="mt-8 w-full text-center bg-emerald-600 text-white font-bold py-3 rounded-lg hover:bg-emerald-700">Choose Pro</a>
                </div>
            </div>
            <div class="max-w-4xl mx-auto bg-white rounded-2xl shadow-2xl p-8 md:p-12 border-2 border-emerald-600">
                <div class="text-center">
                    <h4 class="text-3xl font-bold">Scale Plan</h4>
                    <p class="text-gray-500 mt-2 text-lg">For advertisers spending over $200,000 per month.</p>
                </div>
                <div class="mt-8">
                    <div class="flex justify-between items-end mb-2">
                        <label for="adSpend" class="font-semibold text-gray-700">Your Monthly Ad Spend:</label>
                        <span id="adSpendValue" class="text-2xl font-bold text-emerald-600">$300,000</span>
                    </div>
                    <input type="range" id="adSpendSlider" min="200000" max="1000000" value="300000" step="10000" class="w-full">
                </div>
                <div class="mt-8 bg-emerald-50 rounded-xl p-6 flex flex-col md:flex-row justify-between items-center text-center md:text-left">
                    <div>
                        <p class="text-lg text-gray-700">Your Biddily Platform Fee is</p>
                        <p class="text-sm text-gray-500">2.5% of your total ad spend</p>
                    </div>
                    <div class="mt-4 md:mt-0">
                        <span id="biddilyFee" class="text-4xl font-extrabold gradient-text">$7,500</span>
                        <span class="text-gray-500">/ month</span>
                    </div>
                </div>
                <div class="mt-8 text-center"><a href="#contact" class="bg-emerald-800 text-white font-bold px-10 py-4 rounded-lg text-lg hover:bg-emerald-900 transition duration-300 shadow-lg">Contact Sales to Get Started</a></div>
            </div>
        </div>
    </section>

    <!-- Sign Up Section -->
    <section id="signup" class="bg-gray-50 py-20">
        <div class="min-h-screen flex flex-col items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
            <div class="max-w-md w-full space-y-8">
                <div>
                    <h2 class="mt-6 text-center text-3xl font-extrabold text-gray-900">Create your account</h2>
                    <p class="mt-2 text-center text-sm text-gray-600">And start your 14-day free trial. No credit card required.</p>
                </div>
                <form class="mt-8 space-y-6" action="#" method="POST">
                    <div class="rounded-md shadow-sm -space-y-px">
                        <div><label for="full-name" class="sr-only">Full Name</label><input id="full-name" name="name" type="text" required class="appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 focus:z-10 sm:text-sm" placeholder="Full Name"></div>
                        <div><label for="email-address" class="sr-only">Email address</label><input id="email-address" name="email" type="email" autocomplete="email" required class="appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 focus:z-10 sm:text-sm" placeholder="Email address"></div>
                        <div><label for="password" class="sr-only">Password</label><input id="password" name="password" type="password" autocomplete="current-password" required class="appearance-none rounded-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 focus:z-10 sm:text-sm" placeholder="Password"></div>
                    </div>
                    <div><button type="submit" class="group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500">Create Account</button></div>
                </form>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="py-16 sm:py-24 bg-white">
        <div class="mx-auto max-w-7xl px-6 lg:px-8">
            <div class="mx-auto max-w-2xl lg:mx-0 text-center">
                <h2 class="text-3xl font-bold tracking-tight gradient-text-alt">Get in touch</h2>
                <p class="mt-2 text-lg leading-8 text-gray-600">Have a question about our platform or enterprise pricing? We'd love to hear from you.</p>
            </div>
        </div>
        <div class="py-16 sm:py-24 px-6 lg:px-8">
            <div class="relative bg-white shadow-2xl rounded-2xl max-w-2xl mx-auto p-8 gradient-border">
                <h2 class="text-2xl font-bold tracking-tight text-gray-900">Send us a message</h2>
                <form action="#" method="POST" class="mt-8 grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-8">
                    <div>
                        <label for="first-name-contact" class="block text-sm font-semibold leading-6 text-gray-900">First name</label>
                        <div class="mt-2.5"><input type="text" name="first-name" id="first-name-contact" autocomplete="given-name" class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-emerald-600 sm:text-sm sm:leading-6"></div>
                    </div>
                    <div>
                        <label for="last-name-contact" class="block text-sm font-semibold leading-6 text-gray-900">Last name</label>
                        <div class="mt-2.5"><input type="text" name="last-name" id="last-name-contact" autocomplete="family-name" class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-emerald-600 sm:text-sm sm:leading-6"></div>
                    </div>
                    <div class="sm:col-span-2">
                        <label for="email-contact" class="block text-sm font-semibold leading-6 text-gray-900">Email</label>
                        <div class="mt-2.5"><input type="email" name="email" id="email-contact" autocomplete="email" class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-emerald-600 sm:text-sm sm:leading-6"></div>
                    </div>
                    <div class="sm:col-span-2">
                        <label for="message-contact" class="block text-sm font-semibold leading-6 text-gray-900">Message</label>
                        <div class="mt-2.5"><textarea name="message" id="message-contact" rows="4" class="block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-emerald-600 sm:text-sm sm:leading-6"></textarea></div>
                    </div>
                    <div class="sm:col-span-2"><button type="submit" class="w-full rounded-md gradient-bg px-3.5 py-2.5 text-center text-sm font-semibold text-white shadow-sm hover:opacity-90 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-emerald-600 transition-opacity duration-300">Send message</button></div>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 Biddily.com. All rights reserved.</p>
            <div class="mt-4 space-x-6"><a href="#" class="hover:underline">Terms of Service</a><a href="#" class="hover:underline">Privacy Policy</a></div>
        </div>
    </footer>
    
    <!-- Custom Message Box -->
    <div id="messageBox" class="message-box"></div>

    <!-- JavaScript for Calculator and Gemini API -->
    <script>
        // Function to show a custom message box instead of alert()
        function showMessage(text, isError = false) {
            const messageBox = document.getElementById('messageBox');
            messageBox.textContent = text;
            messageBox.className = isError ? 'message-box show error' : 'message-box show';
            setTimeout(() => {
                messageBox.className = 'message-box';
            }, 3000);
        }

        // Pricing Calculator
        const adSpendSlider = document.getElementById('adSpendSlider');
        const adSpendValue = document.getElementById('adSpendValue');
        const biddilyFee = document.getElementById('biddilyFee');
        const currencyFormatter = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 });
        
        function updateCalculator() {
            const spend = parseInt(adSpendSlider.value);
            const fee = spend * 0.025;
            adSpendValue.textContent = currencyFormatter.format(spend);
            biddilyFee.textContent = currencyFormatter.format(fee);
        }
        adSpendSlider.addEventListener('input', updateCalculator);
        updateCalculator();

        // Gemini API Integration
        const generateCopyBtn = document.getElementById('generateCopyBtn');
        const productNameInput = document.getElementById('productName');
        const copyResultDiv = document.getElementById('copyResult');

        const generateKeywordsBtn = document.getElementById('generateKeywordsBtn');
        const keywordTopicInput = document.getElementById('keywordTopic');
        const keywordsResultTableContainer = document.getElementById('keywordsResultTableContainer');
        
        // The Gemini API key will be automatically handled by the environment.
        const geminiApiKey = ""; 
        
        // IMPORTANT: In a real-world application, this key should be managed securely on the server-side.
        // For this demonstration, we'll use a placeholder and mock the API call.
        const keywordDataApiKey = "YOUR_SERPAPI_OR_OTHER_KEY"; 

        // Reusable function to call Gemini API
        async function callGemini(prompt, button, resultDiv) {
            const originalButtonText = button.innerHTML;
            button.disabled = true;
            button.innerHTML = `<div class="loader"></div><span class="ml-2">Generating...</span>`;
            if (resultDiv) resultDiv.innerHTML = '';

            // Using exponential backoff for retries
            const maxRetries = 5;
            const initialDelay = 1000;
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${geminiApiKey}`;
                    const payload = { contents: [{ parts: [{ text: prompt }] }] };
                    
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        if (response.status === 429 && i < maxRetries - 1) {
                            const delay = initialDelay * Math.pow(2, i);
                            await new Promise(resolve => setTimeout(resolve, delay));
                            continue;
                        }
                        throw new Error(`API request failed with status ${response.status}`);
                    }
                    
                    const result = await response.json();
                    
                    if (result.candidates && result.candidates.length > 0) {
                        return result.candidates[0].content.parts[0].text.trim();
                    } else {
                        throw new Error("No content received from API.");
                    }
                } catch (error) {
                    console.error("Gemini API Error:", error);
                    if (i === maxRetries - 1) { // If it's the last retry, show an error
                        if(resultDiv) resultDiv.innerText = "Sorry, we couldn't generate a response right now. Please try again later.";
                        showMessage("Failed to connect to the Gemini API after multiple retries.", true);
                    }
                }
            }
            return null;
        }
        
        // Function to get keyword data from a third-party API (e.g., SerpApi)
        async function getKeywordData(keyword) {
            // This is a mock function. In a real scenario, you would make an API call here.
            if (keywordDataApiKey === "YOUR_SERPAPI_OR_OTHER_KEY") {
                // Return mock data if the key isn't set, so the UI works for demonstration.
                return {
                    searchVolume: Math.floor(Math.random() * 5000) + 100,
                    cpc: (Math.random() * 2 + 0.5).toFixed(2)
                };
            }
            
            // This is a conceptual real API call.
            // In a real application, you'd use a server-side proxy to protect your API key.
            const apiUrl = `https://serpapi.com/search.json?engine=google_keywords&q=${encodeURIComponent(keyword)}&api_key=${keywordDataApiKey}`;
            try {
                const response = await fetch(apiUrl);
                const data = await response.json();
                return {
                    searchVolume: data.keyword_info?.search_volume || "N/A",
                    cpc: data.keyword_info?.cpc || "N/A"
                };
            } catch (error) {
                console.error("Keyword Data API Error:", error);
                return { searchVolume: "N/A", cpc: "N/A" };
            }
        }

        // Event listener for Ad Copy Generation
        generateCopyBtn.addEventListener('click', async () => {
            const productName = productNameInput.value.trim();
            if (!productName) {
                copyResultDiv.innerText = "Please enter a product name first.";
                showMessage("Please enter a product name first.", false);
                return;
            }
            const prompt = `You are an expert e-commerce copywriter. Generate 3 compelling and distinct ad headlines for a product called "${productName}". The headlines should be suitable for sponsored product ads on platforms like Amazon or Walmart. Make them concise, benefit-oriented, and engaging. Return only the headlines, each on a new line.`;
            const resultText = await callGemini(prompt, generateCopyBtn, copyResultDiv);
            if(resultText) {
                copyResultDiv.innerText = resultText;
            }
        });

        // Event listener for Keyword Generation - this is the section that was incomplete
        generateKeywordsBtn.addEventListener('click', async () => {
            const topic = keywordTopicInput.value.trim();
            if (!topic) {
                keywordsResultTableContainer.innerHTML = `<p class="text-center text-gray-500">Please enter a product or topic first.</p>`;
                showMessage("Please enter a product or topic first.", false);
                return;
            }
            
            const originalButtonText = generateKeywordsBtn.innerHTML;
            generateKeywordsBtn.disabled = true;
            generateKeywordsBtn.innerHTML = `<div class="loader"></div><span class="ml-2">Generating...</span>`;
            keywordsResultTableContainer.innerHTML = `<div class="flex flex-col items-center justify-center p-8 text-gray-500"><div class="loader"></div><p class="mt-4">Generating keyword ideas...</p></div>`;

            const prompt = `You are an expert retail media strategist. Brainstorm a list of 10 relevant keywords for a product described as "${topic}". Include a mix of broad and long-tail keywords. Format the output as a simple list with each keyword on a new line. Do not include numbering or bullet points.`;
            
            const keywordListText = await callGemini(prompt, null, null);

            if (!keywordListText) {
                keywordsResultTableContainer.innerHTML = `<p class="text-center text-gray-500">Sorry, we couldn't generate keywords right now.</p>`;
                generateKeywordsBtn.disabled = false;
                generateKeywordsBtn.innerHTML = originalButtonText;
                return;
            }

            const keywords = keywordListText.split('\n').filter(k => k.trim() !== '');
            
            let tableHTML = `
                <table class="w-full text-left table-fixed">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="p-2 text-sm font-semibold text-gray-600 w-1/2">Keyword</th>
                            <th class="p-2 text-sm font-semibold text-gray-600 w-1/4">Monthly Volume</th>
                            <th class="p-2 text-sm font-semibold text-gray-600 w-1/4">Est. CPC (USD)</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            keywords.forEach(keyword => {
                const keywordId = keyword.replace(/\s+/g, '-').replace(/[^\w-]/g, '');
                tableHTML += `
                    <tr id="row-${keywordId}" class="border-b border-gray-200">
                        <td class="p-2 font-medium break-words">${keyword}</td>
                        <td class="p-2 text-gray-500"><div class="loader !w-4 !h-4"></div></td>
                        <td class="p-2 text-gray-500"><div class="loader !w-4 !h-4"></div></td>
                    </tr>
                `;
            });
            tableHTML += `</tbody></table>`;
            keywordsResultTableContainer.innerHTML = tableHTML;
            
            // Fetch data for each keyword and update the table asynchronously
            for (const keyword of keywords) {
                const keywordId = keyword.replace(/\s+/g, '-').replace(/[^\w-]/g, '');
                const data = await getKeywordData(keyword);
                const row = document.getElementById(`row-${keywordId}`);
                if (row) {
                    row.children[1].innerHTML = `<span class="text-gray-700">${data.searchVolume.toLocaleString()}</span>`;
                    row.children[2].innerHTML = `<span class="text-gray-700">$${data.cpc}</span>`;
                }
            }

            generateKeywordsBtn.disabled = false;
            generateKeywordsBtn.innerHTML = originalButtonText;
        });
    </script>
</body>
</html>
